# 分布式事务

## 常见解决方案

> 参考资料：[分布式事务（5）分布式事务常见解决方案](https://www.qingtingip.com/h_289319.html) 

### 概述

分布式事务主要分为2大类：

+ TCC

  > 参考资料：[【原创】分布式事务之TCC事务模型](https://www.cnblogs.com/rjzheng/p/10164667.html) 

  + 特点：同步调用，要么都成功，要么都失败
  + 原理：采用补偿机制，整个过程分为`try`、`commit`、`cancle`3步
  + 优点
    + 最大程度上保证了数据一致性
    + 效率较高
  + 缺点：需要自己实现补偿业务代码（很恶心）
  + 分类
    + TCC方案
      + 框架：`TX-LCN`、`tcc-transaction`、`himly`、`ByteTcc`
    + saga事务
      + `tcc方案`的变形，将`try`与`commit`进行了合并

+ 消息队列

  > 参考资料：[【原创】老生常谈——利用消息队列处理分布式事务](https://www.cnblogs.com/rjzheng/p/10115798.html) 

  + 特点：异步调用，发起方不用等被调用方执行成功在返回
  + 原理：与常规的消息队列调用方式差不多，不过需要在生产者保证消息与事务的一致性，消费者处保证消息的幂等性
  + 优点：
    + 效率高
  + 缺点：
    + 无法保证数据的实时一致性，只能尽量保证最终一致性，仅适用于对数据一致性要求不是很高的场景
  + 分类
    + 本地消息表
    + 可靠消息最终一致性
      + 跟`本地消息表`区别不大，就是把消息表单提出来作为1个服务了
    + 最大努力通知
      + 跟`最终一致性`差不多，就是增加了次数限制，达到一定次数就不重试了

## TX-LCN

+ 概述

  一种分布式解决方案的框架，有`TCC`、`LCN`、`TXC`3种解决方案

+ 原理：[LCN分布式事务框架原理详解4.0]( https://blog.csdn.net/gududedabai/article/details/83012487 ) 

+ 官方文档：[txlcn官方文档]( https://www.txlcn.org/zh-cn/docs/preface.html ) 